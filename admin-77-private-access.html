<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Hub | Sportsclusive</title>
    <style>
        body { background: #0e0f11; color: white; font-family: sans-serif; padding: 50px; }
        .box { max-width: 600px; margin: auto; background: #1b1c1e; padding: 30px; border-radius: 8px; border-top: 4px solid #00d278; }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; background: #000; border: 1px solid #333; color: #fff; border-radius: 4px; }
        button { background: #00d278; color: #000; border: none; padding: 15px; width: 100%; font-weight: bold; cursor: pointer; border-radius: 4px; }
        #log { margin-top: 15px; font-size: 0.8rem; text-align: center; color: #888; }
    </style>
</head>
<body>
    <div class="box">
        <h2 style="margin-top:0">EXCLUSIVE POSTER</h2>
        <input type="text" id="t" placeholder="Headline">
        <input type="file" id="i" accept="image/*">
        <textarea id="b" rows="8" placeholder="Article body..."></textarea>
        <button onclick="post()">PUBLISH EXCLUSIVE</button>
        <div id="log">Ready to sync with GitHub...</div>
    </div>

    <script>
        const CFG = { token: "YOUR_GITHUB_TOKEN", owner: "mayukh18052012-cell", repo: "sportsclusive" };

        async function post() {
            const title = document.getElementById('t').value;
            const body = document.getElementById('b').value;
            const file = document.getElementById('i').files[0];
            const log = document.getElementById('log');

            if(!title || !file) return alert("Missing data");
            log.innerText = "Processing...";

            const slug = title.toLowerCase().replace(/[^a-z0-9]/g, '-');
            const date = new Date().toISOString().split('T')[0];

            try {
                // Upload Image
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = async () => {
                    const imgB64 = reader.result.split(',')[1];
                    await fetch(`https://api.github.com/repos/${CFG.owner}/${CFG.repo}/contents/images/uploads/${date}-${slug}.png`, {
                        method: 'PUT', headers: { 'Authorization': `token ${CFG.token}` },
                        body: JSON.stringify({ message: "img", content: imgB64 })
                    });

                    // Upload Post
                    const postMD = `---\ntitle: "${title}"\nimage: "images/uploads/${date}-${slug}.png"\ndate: "${date}"\n---\n${body}`;
                    await fetch(`https://api.github.com/repos/${CFG.owner}/${CFG.repo}/contents/_posts/${date}-${slug}.md`, {
                        method: 'PUT', headers: { 'Authorization': `token ${CFG.token}` },
                        body: JSON.stringify({ message: "post", content: btoa(unescape(encodeURIComponent(postMD))) })
                    });
                    log.innerText = "SUCCESS! Article is live.";
                };
            } catch (e) { log.innerText = "Error: Check Console/Token"; }
        }
    </script>
</body>
</html>
